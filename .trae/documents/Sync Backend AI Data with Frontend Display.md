I will modify `api/server.ts` to synchronize the data sent to the AI with the data displayed on the frontend.

**Problem:**
- **Frontend** displays real-time "split queue" data (independent straight/left counts) generated by the virtual simulator and cached in Redis.
- **Backend (AI Loop)** reads the *total* vehicle count from the database and estimates the split using a hardcoded 70% straight / 30% left ratio.
- This causes a mismatch between what the user sees and what the AI "sees".

**Implementation Plan:**
1.  **Modify `startAiAdvisorLoop` in `api/server.ts`**:
    - Before constructing the AI payload, fetch the real-time split data from Redis (`virtual:queue_split:${intersectionId}`).
    - If the Redis data exists, use the exact `straight` and `left` values from the cache.
    - If the Redis data is missing (fallback), keep the current logic (read total from DB and apply 0.7/0.3 estimation).
    - Update the `formattedStats` object to reflect these accurate values.

This ensures the AI makes decisions based on the exact same queue lengths that are displayed on the dashboard.